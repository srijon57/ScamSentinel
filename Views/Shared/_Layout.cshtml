<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - ScamSentinel</title>
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/ScamSentinel.styles.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/output.css" asp-append-version="true" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    <script>
        // Initialize theme before the page loads to avoid FOUC
        document.addEventListener('DOMContentLoaded', function() {
            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

            if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
                document.documentElement.classList.add('dark');
            }
        });
    </script>
    <style>
        /* Hide the modal by default */
        #startup-tips-modal {
            display: none;
        }
    </style>
</head>
<body class="h-full">
    <partial name="../Components/_Header" />
    <main class="flex-grow">
        @RenderBody()
    </main>
    <partial name="../Components/_Footer" />

    <!-- Startup Tips Bulb Icon (bottom-right) -->
    <button id="startup-tips-toggle" class="fixed bottom-4 left-15 z-50 rounded-full bg-yellow-500 p-3 text-white hover:bg-yellow-600 focus:outline-none transition-all duration-300 shadow-lg hover:shadow-xl">
        <i class="fas fa-lightbulb text-xl"></i>
    </button>

    <!-- Dark mode toggle button (bottom-left) -->
    <button id="theme-toggle" class="fixed bottom-4 left-4 z-50 rounded-full bg-gray-800 p-2 text-gray-200 hover:bg-stone-400 focus:outline-none dark:bg-gray-200 dark:text-gray-800 dark:hover:bg-stone-700">
        <svg id="theme-toggle-icon" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <!-- Default: Moon (dark mode) -->
            <path id="moon" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
            <!-- Hidden: Sun (light mode) -->
            <path id="sun" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" class="hidden" />
        </svg>
    </button>

    <!-- Startup Tips Modal -->
    <div id="startup-tips-modal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
            <!-- Backdrop -->
            <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" aria-hidden="true"></div>
            <!-- Modal panel -->
            <div class="relative transform overflow-hidden rounded-2xl bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-4xl dark:bg-gray-800">
                <form id="startup-tips-form">
                    <!-- Header -->
                    <div class="bg-gradient-to-r from-yellow-400 to-yellow-600 px-6 py-4 sm:px-6 dark:from-yellow-600 dark:to-yellow-800">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                <i class="fas fa-lightbulb text-2xl text-white mr-3"></i>
                                <h3 class="text-xl font-bold text-white">Startup Tips - Stay Safe from Scams</h3>
                            </div>
                            <button type="button" id="close-startup-tips" class="rounded-md bg-yellow-500 text-white hover:bg-yellow-600 focus:outline-none p-1">
                                <i class="fas fa-times text-lg"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Tab Navigation -->
                    <div class="border-b border-gray-200 dark:border-gray-700">
                        <nav class="-mb-px flex space-x-8 px-6" aria-label="Tabs">
                            <button type="button" id="online-tab" class="tab-button border-b-2 border-yellow-500 text-yellow-600 whitespace-nowrap py-4 px-1 text-sm font-medium dark:text-yellow-400 dark:border-yellow-400">
                                <i class="fas fa-laptop mr-2"></i>Online Startup
                            </button>
                            <button type="button" id="offline-tab" class="tab-button border-b-2 border-transparent text-gray-500 hover:text-gray-700 whitespace-nowrap py-4 px-1 text-sm font-medium dark:text-gray-400 dark:hover:text-gray-300">
                                <i class="fas fa-store mr-2"></i>Physical Startup
                            </button>
                        </nav>
                    </div>

                    <!-- Tab Content -->
                    <div class="px-6 py-4 max-h-96 overflow-y-auto">
                        <!-- Online Startup Form -->
                        <div id="online-form" class="tab-content space-y-4">
                            <!-- Business Type -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">1. What type of online business are you starting?</label>
                                <select name="onlineBusinessType" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-yellow-500 focus:border-yellow-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                    <option value="">Select business type</option>
                                    <option value="ecommerce">E-commerce Store</option>
                                    <option value="saas">Software as a Service (SaaS)</option>
                                    <option value="marketplace">Online Marketplace</option>
                                    <option value="content">Content Platform/Blog</option>
                                    <option value="education">Online Education</option>
                                    <option value="fintech">Financial Technology</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <!-- Target Audience -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">2. Who is your primary target audience?</label>
                                <select name="targetAudience" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-yellow-500 focus:border-yellow-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                    <option value="">Select target audience</option>
                                    <option value="consumers">Individual Consumers</option>
                                    <option value="businesses">Businesses (B2B)</option>
                                    <option value="both">Both Consumers and Businesses</option>
                                </select>
                            </div>
                            <!-- Revenue Model -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">3. What is your primary revenue model?</label>
                                <select name="revenueModel" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-yellow-500 focus:border-yellow-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                    <option value="">Select revenue model</option>
                                    <option value="subscription">Subscription/Membership</option>
                                    <option value="transaction">Transaction Fees</option>
                                    <option value="advertising">Advertising</option>
                                    <option value="commission">Commission-based</option>
                                    <option value="freemium">Freemium</option>
                                </select>
                            </div>
                            <!-- Payment Processing -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">4. How will you process payments?</label>
                                <select name="paymentProcessing" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-yellow-500 focus:border-yellow-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                    <option value="">Select payment method</option>
                                    <option value="gateway">Payment Gateway (Stripe, PayPal)</option>
                                    <option value="bank">Direct Bank Transfers</option>
                                    <option value="crypto">Cryptocurrency</option>
                                    <option value="multiple">Multiple Methods</option>
                                </select>
                            </div>
                            <!-- Data Collection -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">5. What type of customer data will you collect?</label>
                                <select name="dataCollection" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-yellow-500 focus:border-yellow-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                    <option value="">Select data type</option>
                                    <option value="basic">Basic Contact Information</option>
                                    <option value="financial">Financial/Payment Details</option>
                                    <option value="personal">Personal Identifiable Information</option>
                                    <option value="sensitive">Sensitive Data (Health, etc.)</option>
                                </select>
                            </div>
                            <!-- Technical Infrastructure -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">6. How will you host your website/application?</label>
                                <select name="hosting" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-yellow-500 focus:border-yellow-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                    <option value="">Select hosting type</option>
                                    <option value="cloud">Cloud Hosting (AWS, Google Cloud)</option>
                                    <option value="shared">Shared Hosting</option>
                                    <option value="dedicated">Dedicated Server</option>
                                    <option value="self">Self-hosted</option>
                                </select>
                            </div>
                            <!-- Team Size -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">7. What is your current team size?</label>
                                <select name="teamSize" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-yellow-500 focus:border-yellow-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                    <option value="">Select team size</option>
                                    <option value="solo">Solo Founder</option>
                                    <option value="small">2-5 People</option>
                                    <option value="medium">6-10 People</option>
                                    <option value="large">10+ People</option>
                                </select>
                            </div>
                            <!-- Funding Stage -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">8. What is your current funding stage?</label>
                                <select name="fundingStage" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-yellow-500 focus:border-yellow-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                    <option value="">Select funding stage</option>
                                    <option value="bootstrapped">Bootstrapped</option>
                                    <option value="seed">Seed Funding</option>
                                    <option value="series-a">Series A</option>
                                    <option value="later">Series B or Later</option>
                                </select>
                            </div>
                            <!-- Legal Structure -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">9. What is your business legal structure?</label>
                                <select name="legalStructure" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-yellow-500 focus:border-yellow-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                    <option value="">Select legal structure</option>
                                    <option value="sole">Sole Proprietorship</option>
                                    <option value="partnership">Partnership</option>
                                    <option value="llc">Limited Liability Company (LLC)</option>
                                    <option value="corporation">Corporation</option>
                                </select>
                            </div>
                            <!-- Compliance Awareness -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">10. How familiar are you with digital compliance regulations?</label>
                                <select name="complianceAwareness" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-yellow-500 focus:border-yellow-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                    <option value="">Select familiarity level</option>
                                    <option value="expert">Expert - Fully Compliant</option>
                                    <option value="knowledgeable">Knowledgeable - Basic Understanding</option>
                                    <option value="learning">Still Learning</option>
                                    <option value="unfamiliar">Unfamiliar</option>
                                </select>
                            </div>
                        </div>

                        <!-- Physical Startup Form -->
                        <div id="offline-form" class="tab-content hidden space-y-4">
                            <!-- Business Type -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">1. What type of physical business are you starting?</label>
                                <select name="offlineBusinessType" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-yellow-500 focus:border-yellow-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                    <option value="">Select business type</option>
                                    <option value="retail">Retail Store</option>
                                    <option value="restaurant">Restaurant/Food Service</option>
                                    <option value="manufacturing">Manufacturing</option>
                                    <option value="service">Service Business</option>
                                    <option value="office">Office-Based Business</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <!-- Location Type -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">2. What type of location are you operating from?</label>
                                <select name="locationType" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-yellow-500 focus:border-yellow-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                    <option value="">Select location type</option>
                                    <option value="commercial">Commercial Space</option>
                                    <option value="residential">Residential Area</option>
                                    <option value="industrial">Industrial Area</option>
                                    <option value="mixed">Mixed-Use Area</option>
                                </select>
                            </div>
                            <!-- Customer Interaction -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">3. How will customers primarily interact with your business?</label>
                                <select name="customerInteraction" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-yellow-500 focus:border-yellow-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                    <option value="">Select interaction type</option>
                                    <option value="walkin">Walk-in Customers</option>
                                    <option value="appointment">By Appointment Only</option>
                                    <option value="delivery">Delivery/Pickup</option>
                                    <option value="mixed">Mixed Approach</option>
                                </select>
                            </div>
                            <!-- Inventory Management -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">4. How will you manage inventory/supplies?</label>
                                <select name="inventoryManagement" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-yellow-500 focus:border-yellow-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                    <option value="">Select inventory method</option>
                                    <option value="manual">Manual Tracking</option>
                                    <option value="software">Inventory Software</option>
                                    <option value="dropship">Dropshipping</option>
                                    <option value="justintime">Just-in-Time</option>
                                </select>
                            </div>
                            <!-- Payment Methods -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">5. What payment methods will you accept?</label>
                                <select name="paymentMethods" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-yellow-500 focus:border-yellow-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                    <option value="">Select payment methods</option>
                                    <option value="cashonly">Cash Only</option>
                                    <option value="card">Card Payments</option>
                                    <option value="digital">Digital Payments</option>
                                    <option value="all">All Methods</option>
                                </select>
                            </div>
                            <!-- Employee Count -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">6. How many employees will you have initially?</label>
                                <select name="employeeCount" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-yellow-500 focus:border-yellow-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                    <option value="">Select employee count</option>
                                    <option value="none">No Employees (Solo)</option>
                                    <option value="1-5">1-5 Employees</option>
                                    <option value="6-10">6-10 Employees</option>
                                    <option value="10+">10+ Employees</option>
                                </select>
                            </div>
                            <!-- Licensing Requirements -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">7. What types of licenses/permits do you need?</label>
                                <select name="licensing" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-yellow-500 focus:border-yellow-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                    <option value="">Select license type</option>
                                    <option value="basic">Basic Business License</option>
                                    <option value="special">Specialized Permits</option>
                                    <option value="health">Health/Safety Permits</option>
                                    <option value="multiple">Multiple Licenses</option>
                                </select>
                            </div>
                            <!-- Supplier Relationships -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">8. How many suppliers/vendors will you work with?</label>
                                <select name="suppliers" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-yellow-500 focus:border-yellow-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                    <option value="">Select supplier count</option>
                                    <option value="1-3">1-3 Suppliers</option>
                                    <option value="4-6">4-6 Suppliers</option>
                                    <option value="7-10">7-10 Suppliers</option>
                                    <option value="10+">10+ Suppliers</option>
                                </select>
                            </div>
                            <!-- Insurance Coverage -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">9. What type of insurance will you carry?</label>
                                <select name="insurance" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-yellow-500 focus:border-yellow-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                    <option value="">Select insurance type</option>
                                    <option value="liability">Liability Insurance</option>
                                    <option value="property">Property Insurance</option>
                                    <option value="comprehensive">Comprehensive Coverage</option>
                                    <option value="none">No Insurance Initially</option>
                                </select>
                            </div>
                            <!-- Security Measures -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">10. What security measures will you implement?</label>
                                <select name="security" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-yellow-500 focus:border-yellow-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                                    <option value="">Select security measures</option>
                                    <option value="basic">Basic Security</option>
                                    <option value="advanced">Advanced Security System</option>
                                    <option value="surveillance">Surveillance Only</option>
                                    <option value="professional">Professional Security Service</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- Footer -->
                    <div class="bg-gray-50 px-6 py-3 sm:flex sm:flex-row-reverse sm:px-6 dark:bg-gray-700">
                        <button type="submit" class="inline-flex w-full justify-center rounded-md bg-yellow-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-yellow-700 sm:ml-3 sm:w-auto">
                            Generate Safety Report
                        </button>
                        <button type="button" id="cancel-startup-tips" class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-4 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto dark:bg-gray-600 dark:text-white dark:ring-gray-500">
                            Cancel
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    @await RenderSectionAsync("Scripts", required: false)

    <script>
        // Toast config
        toastr.options = {
            "closeButton": true,
            "progressBar": true,
            "positionClass": "toast-bottom-right",
            "timeOut": "2000"
        };

        @if (TempData["SuccessMessage"] != null)
        {
                <text>toastr.success("@TempData["SuccessMessage"]");</text>
        }
        @if (TempData["ErrorMessage"] != null)
        {
                <text>toastr.error("@TempData["ErrorMessage"]");</text>
        }

        // Dark mode toggle logic
        const themeToggleBtn = document.getElementById('theme-toggle');
        const themeToggleIcon = document.getElementById('theme-toggle-icon');
        const moonIcon = document.getElementById('moon');
        const sunIcon = document.getElementById('sun');

        // Set initial icon based on theme
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            moonIcon.classList.add('hidden');
            sunIcon.classList.remove('hidden');
        }

        // Toggle theme and icon
        themeToggleBtn.addEventListener('click', () => {
            if (document.documentElement.classList.contains('dark')) {
                document.documentElement.classList.remove('dark');
                localStorage.theme = 'light';
                moonIcon.classList.remove('hidden');
                sunIcon.classList.add('hidden');
            } else {
                document.documentElement.classList.add('dark');
                localStorage.theme = 'dark';
                moonIcon.classList.add('hidden');
                sunIcon.classList.remove('hidden');
            }
        });

        // Startup Tips Modal Logic
        const startupTipsToggle = document.getElementById('startup-tips-toggle');
        const startupTipsModal = document.getElementById('startup-tips-modal');
        const closeStartupTips = document.getElementById('close-startup-tips');
        const cancelStartupTips = document.getElementById('cancel-startup-tips');
        const onlineTab = document.getElementById('online-tab');
        const offlineTab = document.getElementById('offline-tab');
        const onlineForm = document.getElementById('online-form');
        const offlineForm = document.getElementById('offline-form');
        const startupTipsForm = document.getElementById('startup-tips-form');

        // Open modal
        startupTipsToggle.addEventListener('click', () => {
            startupTipsModal.classList.remove('hidden');
            startupTipsModal.style.display = 'block';
        });

        // Close modal
        const closeModal = () => {
            startupTipsModal.classList.add('hidden');
            startupTipsModal.style.display = 'none';
        };

        closeStartupTips.addEventListener('click', closeModal);
        cancelStartupTips.addEventListener('click', closeModal);

        // Close modal when clicking outside
        startupTipsModal.addEventListener('click', (e) => {
            if (e.target === startupTipsModal) {
                closeModal();
            }
        });

        // Tab switching
        onlineTab.addEventListener('click', () => {
            onlineTab.classList.add('border-yellow-500', 'text-yellow-600', 'dark:text-yellow-400', 'dark:border-yellow-400');
            onlineTab.classList.remove('border-transparent', 'text-gray-500', 'dark:text-gray-400');
            offlineTab.classList.add('border-transparent', 'text-gray-500', 'dark:text-gray-400');
            offlineTab.classList.remove('border-yellow-500', 'text-yellow-600', 'dark:text-yellow-400', 'dark:border-yellow-400');
            onlineForm.classList.remove('hidden');
            offlineForm.classList.add('hidden');
        });

        offlineTab.addEventListener('click', () => {
            offlineTab.classList.add('border-yellow-500', 'text-yellow-600', 'dark:text-yellow-400', 'dark:border-yellow-400');
            offlineTab.classList.remove('border-transparent', 'text-gray-500', 'dark:text-gray-400');
            onlineTab.classList.add('border-transparent', 'text-gray-500', 'dark:text-gray-400');
            onlineTab.classList.remove('border-yellow-500', 'text-yellow-600', 'dark:text-yellow-400', 'dark:border-yellow-400');
            offlineForm.classList.remove('hidden');
            onlineForm.classList.add('hidden');
        });

        // Form submission
        startupTipsForm.addEventListener('submit', (e) => {
            e.preventDefault();

            // Determine which tab is active
            const isOnlineTabActive = !onlineForm.classList.contains('hidden');
            const formData = new FormData();

            // Add the business type (online/offline)
            formData.append('businessType', isOnlineTabActive ? 'online' : 'offline');

            // Collect data from the active tab only
            const activeForm = isOnlineTabActive ? onlineForm : offlineForm;
            const inputs = activeForm.querySelectorAll('select');

            let isValid = true;
            inputs.forEach(input => {
                if (!input.value) {
                    isValid = false;
                    input.classList.add('border-red-500');
                } else {
                    input.classList.remove('border-red-500');
                    formData.append(input.name, input.value);
                }
            });

            if (!isValid) {
                toastr.error('Please fill out all required fields.');
                return;
            }

            // Build URL parameters
            const params = new URLSearchParams(formData);

            // Redirect to results page with parameters
            window.location.href = '@Url.Action("StartupTipsResults", "Home")?' + params.toString();
        });
    </script>

    <partial name="_Chatbot" />
</body>
</html>
